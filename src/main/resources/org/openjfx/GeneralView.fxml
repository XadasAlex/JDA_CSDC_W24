<?import javafx.scene.control.Label?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.control.TextField?>

<?import javafx.scene.layout.HBox?>
<?import javafx.scene.control.PasswordField?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.ProgressIndicator?>
<VBox xmlns="http://javafx.com/javafx"
      xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="org.openjfx.controllers.GeneralController"
      alignment="TOP_CENTER" spacing="10">
    <Label text="General Settings" style="-fx-font-size: 20;"/>
    <HBox>
        <Label text="Tokens and Keys"/>
    </HBox>
    <HBox spacing="10.0">
        <PasswordField fx:id="botTokenTextField" promptText="Enter Bot Token"/>
        <Label fx:id="botTokenLabel" visible="false" text="Loaded key from env."/>
    </HBox>
    <HBox spacing="10.0">
        <PasswordField fx:id="apiKeyTextField" promptText="Enter OpenAI API-Key"/>
        <Label fx:id="apiKeyLabel" visible="false" text="Loaded key from env."/>
    </HBox>
    <HBox>
        <Button text="Save" onAction="#saveSettings"/>

    </HBox>
    <HBox alignment="CENTER" spacing="10.0">
        <Label text="Bot Status" style="-fx-font-size: 20"/>
        <ProgressIndicator fx:id="loadingSpinner" visible="false" progress="-1" prefWidth="25.0" prefHeight="25.0"/>
    </HBox>
    <!-- Profile and Status Info -->
    <HBox spacing="10">
        <!-- Profile Picture -->
        <ImageView fx:id="profileImageView" fitWidth="100" fitHeight="100"
                   style="-fx-effect: dropshadow(gaussian, gray, 10, 0.5, 0, 0);"/>
        <!-- Status Information -->
        <VBox alignment="CENTER_LEFT" spacing="5">
            <!-- Name with Start Button -->
            <HBox alignment="CENTER_LEFT" spacing="10">
                <Label text="Name:" style="-fx-font-weight: bold;"/>
                <Label fx:id="botNameLabel" text="Loading..." visible="false" style="-fx-font-size: 14;"/>
            </HBox>

            <HBox alignment="CENTER_LEFT" spacing="10">
                <Label text="Status:" style="-fx-font-weight: bold;"/>
                <Label fx:id="botStatusLabel" text="Loading..." visible="false" style="-fx-font-size: 14;"/>
            </HBox>

            <Button fx:id="startButton" text="Start Bot" onAction="#startBot"/>
        </VBox>
    </HBox>

    <!-- Separator -->
    <Separator/>

    <!-- Server and Member List -->
    <VBox spacing="5">
        <Label text="Connected Servers:" style="-fx-font-size: 16;"/>
        <TableView fx:id="serverTableView">
            <columns>
                <!-- Server Name Column -->
                <TableColumn fx:id="serverNameColumn" text="Server Name"/>
                <!-- Total Members Column -->
                <TableColumn fx:id="totalMembersColumn" text="Total Members"/>
                <!-- Online Members Column -->
                <TableColumn fx:id="onlineMembersColumn" text="Online Members"/>
            </columns>
        </TableView>
    </VBox>
</VBox>